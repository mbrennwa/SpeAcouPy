# simulation of a driver with its front radiating into free space and the back into a flared horn
# the speacoupy output does not perfectly agree with the AJ Horn output because AJ Horn uses a plane-wave approximation for the flared horn

radiation_space: 2pi

elements:

# single full horn for reference
- type: horn
  label: SINGLEHORN
  L: 4
  S_throat: 200E-4      # m²
  S_mouth:  16200E-4      # m²
  R_throat: 0
  R_mouth: 0
  profile: conical
  mouth_load: radiation_space
  mouth_label: SINGLEHORN_MOUTH
  mouth_termination: baffle
  

# First horn section on the driver, splitting in two
- type: horn
  label: SPLITTER
  L: 1
  S_throat: 200E-4      # m²
  S_mouth:  1800E-4      # m²
  R_throat: 0
  R_mouth: 0
  profile: conical
  mouth_load: [SPLIT1, SPLIT2]  # <-- split into two horns

- type: horn
  label: SPLIT1
  L: 3
  S_throat: 900E-4      # m²
  S_mouth:  8100E-4     # m²
  R_throat: 0
  R_mouth: 0
  profile: conical
  mouth_load: radiation_space
  mouth_label: SPLIT1_MOUTH
  mouth_termination: baffle
 
- type: horn
  label: SPLIT2
  L: 3
  S_throat: 900E-4      # m²
  S_mouth:  8100E-4     # m²
  R_throat: 0
  R_mouth: 0
  profile: conical
  mouth_load: radiation_space
  mouth_label: SPLIT2_MOUTH
  mouth_termination: baffle
 

- type: driver
  label: DRIVER
  fs: 35.0
  Vas: 60e-3
  Qms: 3.5
  Qes: 0.35
  Sd: 200E-4
  Re: 8.0
  Z_hf: [ [1E3,8.0] , [1E4,8.0]]
  front_load: radiation_space
#  back_load: SPLITTER   # <--- use this for the split horn
  back_load: SINGLEHORN   # <--- use this for no split
  front_radiator_label: DRIVER_FRONT
  back_radiator_label: DRIVER_BACK

circuit:
  series:
  - DRIVER

frequency:
  min: 10
  max: 2000
  points: 100

source:
  volts_rms: 2.83
